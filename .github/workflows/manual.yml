name: Constructor

on:
  push:
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Add dependencies
        run: |
          sudo add-apt-repository ppa:dotnet/backports
          
      - name: Install dependencies dotnet
        run: |
          sudo rm -rf /usr/share/dotnet
          wget https://dot.net/v1/dotnet-install.sh -O dotnet-install.sh
          chmod +x dotnet-install.sh
          ./dotnet-install.sh --version 9.0.105 --install-dir /usr/lib/dotnet --architecture x64
          export DOTNET_ROOT=/usr/lib/dotnet
          export PATH=$DOTNET_ROOT:$PATH
          source ~/.bashrc
          dotnet --list-sdks
          
      - name: Install dependencies postgresql
        run: |
          sudo apt install -y postgresql-common
          sudo /usr/share/postgresql-common/pgdg/apt.postgresql.org.sh
        continue-on-error: true
          
      - name: Install dependencies npm
        run: sudo npm install
        continue-on-error: true

      - name: Verify
        run: |
          sudo apt-get update
          which dotnet
          dotnet --version
        continue-on-error: true
          
